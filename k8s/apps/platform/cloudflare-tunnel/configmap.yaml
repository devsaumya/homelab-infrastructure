apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudflared-config
  namespace: cloudflare-tunnel
  annotations:
    argocd.argoproj.io/sync-wave: "6"
data:
  config.yml: |
    tunnel: <TUNNEL_ID>
    credentials-file: /etc/cloudflared/credentials.json
    
    ingress:
      # Main entrypoint - Traefik dashboard (optional, behind Zero Trust recommended)
      - hostname: home.connect2home.online
        service: https://traefik.ingress-traefik.svc.cluster.local:443
      # Individual public services - all route through Traefik
      - hostname: grafana.connect2home.online
        service: https://traefik.ingress-traefik.svc.cluster.local:443
      # Add more public services here as needed
      # - hostname: vault.connect2home.online
      #   service: https://traefik.ingress-traefik.svc.cluster.local:443
      # Catch-all 404
      - service: http_status:404

