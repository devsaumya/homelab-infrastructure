global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'homelab'
    environment: 'production'

rule_files:
  - '/etc/prometheus/alerts.yml'

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'node-exporter'
    static_configs:
      - targets:
          - '10.0.1.100:9100'
          - '10.0.1.101:9100'
          - '10.0.1.102:9100'
          - '10.0.1.105:9100'

  - job_name: 'k3s'
    kubernetes_sd_configs:
      - role: node
    relabel_configs:
      - source_labels: [__address__]
        regex: '(.*):10250'
        target_label: __address__
        replacement: '${1}:9100'

  - job_name: 'docker'
    static_configs:
      - targets: ['10.0.1.105:9323']

  - job_name: 'adguard'
    static_configs:
      - targets: ['10.0.1.53:3000']

